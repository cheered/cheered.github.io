---
layout: pages
title: quiltReview2
date: 2019-06-21 10:32:20
categories: 
   - project-quilt
tags: 
   - quilt
---

## 第三个功能-关于文章标签

1. 先在tagService里写接口，基本的增删改，查询单个，查询所有。

   - （根据需求在DAO层加一个查询所有标签的方法，返回一个list）

2. 然后去tagServiceImpl里实现，对于传入对象的，在controller里面注入更改的值，对直接传入具体属性的，在service层注入。然后返回用dao对象调用dao层方法的结果。

3. controller层。

   - 首先渲染页面。得到所有标签，注入到model里。
   - 删除功能，调用service的删除方法，返回值为1，则删除成功。
   - 添加功能，接收前台的标签名称，字体颜色，字体大小，新建一个list类型的tag对象来接受前台传过来的数据，并且将值注入到这个tag对象里面。然后调用插入方法，返回值为1则成功。
   - 编辑功能里，嵌套了一个小页面，所以先需要对小页面进行渲染。得到这个单个标签的值，然后注入到model里。

      - 这里要根据这个特定的ID来修改对应的标签（用了RESTFUL风格）
      >@RequestMapping("/tag/mod/{id}")
      >@PathVariable("id") Integer id,
      - 然后调用service层的mod方法即可，注意传入的四个参数。

4. 前台页面。

   - 这里对标签的显示需要用到jstl的循环标签。对页面上所有显示的需要从数据库里取的值，都需要用el表达式书写，即${}。
    
   - 第二个需要注意的是前台关于RESTFUL风格，URL的书写规范

   `var str = "<%=request.getContextPath()%>/admin/article/tag/edit_tag?id="+ $(this).attr('data-index');`
   
   - (这个id 就是特定格式)


---

## 第四个功能 文章分类

- ***本功能理解上的一个重点是：在数据库里增加一个PID的字段，默认为0时，无父节点，如果是子节点，其PID的值是父节点ID的值。***

1. 在service层，页面渲染时需要用到获取所有父标签和子标签的方法，添加标签涉及到插入功能，编辑功能类似于标签，还需要有个获取特定分类的方法，最后删除功能，删除子分类时正常删除即可，删除父分类，要删除它下面的所有子分类。（所以还需要在dao层加一个删除所以子标签的接口 【删除所有PID=ID的记录】）

2. 其他的和标签一模一样，不写了。

3. 这篇儿到此为止。 bye

4. 对不起打脸了，我又回来了，这个功能还有一个需要注意的地方：

   - 关于前台页面，父分类正常循环输出，子分类循环输出时需要做一个判断，id=pid.